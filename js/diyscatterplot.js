"use strict";

var diybucket = {}; // our global variable
diybucket.linearRegression = {};
var diylr = diybucket.linearRegression;
diylr.alpha = 0.0003;
diylr.theta = [0, 0];
diylr.iterations = 0;

diybucket.data = [{ x: 5, y: 4 }, { x: 15, y: 20 }, { x: 30, y: 45 }, { x: 12, y: 15 }, { x: 60, y: 70 }, { x: 55, y: 69 }, { x: 29, y: 30 }, { x: 44, y: 40 }, { x: 78, y: 89 }, { x: 90, y: 95 }, { x: 69, y: 77 }, { x: 74, y: 74 }, { x: 60, y: 66 }, { x: 100, y: 96 }];

// SCATTER PLOT SETUP

diybucket.scatterplot = {}; // diybucket for the scatter plot
var diysp = diybucket.scatterplot; // convenience variable
diysp.margin = { top: 20, right: 20, bottom: 30, left: 40 };
diysp.width = 600 - diysp.margin.left - diysp.margin.right;
diysp.height = 313 - diysp.margin.top - diysp.margin.bottom;

// setup x
diysp.xValue = function (d) {
  return d.x;
}; // data -> value
diysp.xScale = d3.scale.linear().domain([0, 100]).range([0, diysp.width]); // value -> didiysplay
diysp.xMap = function (d) {
  return diysp.xScale(diysp.xValue(d));
}; // data -> didiysplay
diysp.xAxis = d3.svg.axis().scale(diysp.xScale).orient("bottom");

// setup y
diysp.yValue = function (d) {
  return d.y;
}; // data -> value
diysp.yScale = d3.scale.linear().domain([0, 100]).range([diysp.height, 0]); // value -> didiysplay
diysp.yMap = function (d) {
  return diysp.yScale(diysp.yValue(d));
}; // data -> didiysplay
diysp.yAxis = d3.svg.axis().scale(diysp.yScale).orient("left");

// setup color scale
diysp.colorScale = d3.scale.linear().range(["hsl(20,90%,40%)", "hsl(180,60%,40%)"]);

// add graph canvas to #scatterplot div
diysp.svg = d3.select("#diyscatterplot").append("svg").attr("width", diysp.width + diysp.margin.left + diysp.margin.right).attr("height", diysp.height + diysp.margin.bottom + diysp.margin.top).append("g").attr("transform", "translate(" + diysp.margin.left + "," + diysp.margin.top + ")");

// x-axis
diysp.svg.append("g").attr({
  "class": "x axis",
  transform: "translate(0," + diysp.height + ")"
}).call(diysp.xAxis).append("text").attr({
  "class": "label",
  x: diysp.width,
  y: -6
}).style("text-anchor", "end").text("x");

// y-axis
diysp.svg.append("g").attr("class", "y axis").call(diysp.yAxis).append("text").attr({
  "class": "label",
  transform: "rotate(-90)",
  y: 6,
  dy: ".71em"
}).style("text-anchor", "end").text("y");

// CHANGES TO SCATTER PLOT
diybucket.update = function () {

  // buffer added to data domain to prevent overlapping axis
  //  diysp.xScale.domain([d3.min(data,diysp.xValue)-1, d3.max(data,diysp.xValue)+1]);
  //  diysp.yScale.domain([d3.min(data,diysp.yValue)-1, d3.max(data,diysp.yValue)+1]);
  diysp.xScale.domain([0, 100]);
  diysp.yScale.domain([0, 100]);
  diysp.colorScale.domain([d3.min(diybucket.data, diysp.yValue) - 1, d3.max(diybucket.data, diysp.yValue) + 1]).nice();

  // update axes
  diysp.svg.select(".x.axis").transition().duration(1000).call(diysp.xAxis);

  diysp.svg.select(".y.axis").transition().duration(1000).call(diysp.yAxis);

  // dots
  var dots = diysp.svg.selectAll(".dot").data(diybucket.data).attr({
    "class": "dot",
    r: 3.5,
    cx: diysp.xMap,
    cy: diysp.yMap
  }).style("fill", function (d) {
    return diysp.colorScale(diysp.yValue(d));
  });

  dots.enter().append("circle").attr({
    "class": "dot",
    r: 3.5,
    cx: diysp.xMap,
    cy: diysp.yMap
  }).style("fill", function (d) {
    return diysp.colorScale(diysp.yValue(d));
  }).on("click", function (d, i) {
    if (diybucket.data.length > 2) {
      diybucket.data.splice(i, 1);
    } else {
      alert("hey man, not cool. \n\neveryone knows there have to exist at least two points for a line to exist.");
    }
    diybucket.update();
  });

  dots.exit().remove();

  // calculate theta values using gradient descent
  // begins with a "guess", which is theta_0 = 0, theta_1 = 0
  // a.k.a. - the x-axis (y = 0 * x + 0 => y = 0)

  diylr.alpha = diylr.alpha || 0.0003, diylr.theta = diylr.theta || [0, 0], diylr.jHistory = [], diylr.thetaHistory = [];
  var i = 0,
      difference = function difference() {
    return diylr.jHistory[i - 2] ? diylr.jHistory[i - 2] - diylr.jHistory[i - 1] : 1;
  };

  do {
    diylr.theta = gradientDescent(diybucket.data, diylr.alpha, diylr.theta);
    diylr.jHistory.push(J(diybucket.data, diylr.theta));
    diylr.thetaHistory.push(diylr.theta);
    i++;
  } while (difference() > 0.0001);

  diylr.iterations = i;

  var maxX = d3.max(diybucket.data, diysp.xValue);
  // var minX = d3.min(diybucket.data,diysp.xValue);
  var minX = 0;
  diysp.svg.selectAll("line").remove();
  var lineOfBestFit = diysp.svg.append("line").attr({
    x1: diysp.xScale(minX),
    y1: diysp.yScale(minX * diylr.theta[1] + diylr.theta[0]),
    x2: diysp.xScale(maxX),
    y2: diysp.yScale(maxX * diylr.theta[1] + diylr.theta[0]),
    "stroke": "#1CDEC4",
    "stroke-width": 2
  });

  // display the equation for the line of best fit
  var docFrag = document.createDocumentFragment();
  var eq = document.createElement("P");
  docFrag.appendChild(eq);
  var eqText = document.createTextNode("y = " + diylr.theta[1].toPrecision(3) + "x + " + diylr.theta[0].toPrecision(3));
  eq.appendChild(eqText);
  $("#diyequation").empty();
  $("#diyequation").append(docFrag);

  var docFrag2 = document.createDocumentFragment();
  var numIters = document.createElement("P");
  docFrag2.appendChild(numIters);
  var numItersText = document.createTextNode("number of iterations: " + diylr.iterations);
  numIters.appendChild(numItersText);
  $("#num-iters").empty();
  $("#num-iters").append(docFrag2);
};
diybucket.update();

// adds a new, randomly generated datum to graph
d3.select("#diyadd").on("click", function () {
  var newDot = {};
  newDot.x = Math.floor(Math.random() * 100);
  newDot.y = Math.floor(Math.random() * 100);
  diybucket.data.push(newDot);
  diybucket.update();
});

$("#diyvals").on("submit", function () {
  diylr.theta[0] = $("#diyvals input:nth-child(1)").val();
  diylr.theta[1] = $("#diyvals input:nth-child(2)").val();
  diylr.alpha = $("#diyvals input:nth-child(3)").val();
  event.preventDefault();
  diybucket.update();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kaXlzY2F0dGVycGxvdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNuQixTQUFTLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBQ2hDLElBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQztBQUN2QyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztBQUNyQixLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLEtBQUssQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDOztBQUVyQixTQUFTLENBQUMsSUFBSSxHQUFHLENBQ2YsRUFBRSxDQUFDLEVBQUcsQ0FBQyxFQUFLLENBQUMsRUFBRyxDQUFDLEVBQUUsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsRUFBRSxFQUFJLENBQUMsRUFBRyxFQUFFLEVBQUMsRUFDbkIsRUFBRSxDQUFDLEVBQUcsR0FBRyxFQUFHLENBQUMsRUFBRyxFQUFFLEVBQUMsQ0FDcEIsQ0FBQzs7OztBQUlGLFNBQVMsQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQzNCLElBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7QUFDbEMsS0FBSyxDQUFDLE1BQU0sR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUM1RCxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUMzRCxLQUFLLENBQUMsTUFBTSxHQUFFLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQzs7O0FBRzNELEtBQUssQ0FBQyxNQUFNLEdBQUcsVUFBUyxDQUFDLEVBQUU7QUFBRSxTQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FBRSxDQUFDO0FBQzNDLEtBQUssQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FDN0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQ2YsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzNCLEtBQUssQ0FBQyxJQUFJLEdBQUcsVUFBUyxDQUFDLEVBQUU7QUFBRSxTQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMs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QUMsS0FBSyxHQUFHLENBQUMsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3JELE9BQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2QixXQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7Q0FDcEIsQ0FBQyxDQUFDIiwiZmlsZSI6InNyYy9qcy9kaXlzY2F0dGVycGxvdC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkaXlidWNrZXQgPSB7fTsgLy8gb3VyIGdsb2JhbCB2YXJpYWJsZVxuZGl5YnVja2V0LmxpbmVhclJlZ3Jlc3Npb24gPSB7fTtcbnZhciBkaXlsciA9IGRpeWJ1Y2tldC5saW5lYXJSZWdyZXNzaW9uO1xuZGl5bHIuYWxwaGEgPSAwLjAwMDM7XG5kaXlsci50aGV0YSA9IFswLDBdO1xuZGl5bHIuaXRlcmF0aW9ucyA9IDA7XG5cbmRpeWJ1Y2tldC5kYXRhID0gW1xuICB7IHggOiA1ICAgLCB5IDogNCB9LFxuICB7IHggOiAxNSAgLCB5IDogMjB9LFxuICB7IHggOiAzMCAgLCB5IDogNDV9LFxuICB7IHggOiAxMiAgLCB5IDogMTV9LFxuICB7IHggOiA2MCAgLCB5IDogNzB9LFxuICB7IHggOiA1NSAgLCB5IDogNjl9LFxuICB7IHggOiAyOSAgLCB5IDogMzB9LFxuICB7IHggOiA0NCAgLCB5IDogNDB9LFxuICB7IHggOiA3OCAgLCB5IDogODl9LFxuICB7IHggOiA5MCAgLCB5IDogOTV9LFxuICB7IHggOiA2OSAgLCB5IDogNzd9LFxuICB7IHggOiA3NCAgLCB5IDogNzR9LFxuICB7IHggOiA2MCAgLCB5IDogNjZ9LFxuICB7IHggOiAxMDAgLCB5IDogOTZ9XG5dO1xuXG4vLyBTQ0FUVEVSIFBMT1QgU0VUVVBcblxuZGl5YnVja2V0LnNjYXR0ZXJwbG90ID0ge307IC8vIGRpeWJ1Y2tldCBmb3IgdGhlIHNjYXR0ZXIgcGxvdFxudmFyIGRpeXNwID0gZGl5YnVja2V0LnNjYXR0ZXJwbG90OyAvLyBjb252ZW5pZW5jZSB2YXJpYWJsZVxuZGl5c3AubWFyZ2luID0geyB0b3A6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDQwIH07XG5kaXlzcC53aWR0aCA9IDYwMCAtIGRpeXNwLm1hcmdpbi5sZWZ0IC0gZGl5c3AubWFyZ2luLnJpZ2h0O1xuZGl5c3AuaGVpZ2h0PSAzMTMgLSBkaXlzcC5tYXJnaW4udG9wIC0gZGl5c3AubWFyZ2luLmJvdHRvbTtcblxuLy8gc2V0dXAgeFxuZGl5c3AueFZhbHVlID0gZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9OyAvLyBkYXRhIC0+IHZhbHVlXG5kaXlzcC54U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAuZG9tYWluKFswLDEwMF0pXG4gIC5yYW5nZShbMCwgZGl5c3Aud2lkdGhdKTsgLy8gdmFsdWUgLT4gZGlkaXlzcGxheVxuZGl5c3AueE1hcCA9IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGRpeXNwLnhTY2FsZShkaXlzcC54VmFsdWUoZCkpOyB9OyAvLyBkYXRhIC0+IGRpZGl5c3BsYXlcbmRpeXNwLnhBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAuc2NhbGUoZGl5c3AueFNjYWxlKVxuICAub3JpZW50KFwiYm90dG9tXCIpO1xuXG4vLyBzZXR1cCB5XG5kaXlzcC55VmFsdWUgPSBmdW5jdGlvbihkKSB7IHJldHVybiBkLnk7IH07IC8vIGRhdGEgLT4gdmFsdWVcbmRpeXNwLnlTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gIC5kb21haW4oWzAsMTAwXSlcbiAgLnJhbmdlKFtkaXlzcC5oZWlnaHQsMF0pOyAvLyB2YWx1ZSAtPiBkaWRpeXNwbGF5XG5kaXlzcC55TWFwID0gZnVuY3Rpb24oZCkgeyByZXR1cm4gZGl5c3AueVNjYWxlKGRpeXNwLnlWYWx1ZShkKSk7IH07IC8vIGRhdGEgLT4gZGlkaXlzcGxheVxuZGl5c3AueUF4aXMgPSBkMy5zdmcuYXhpcygpXG4gIC5zY2FsZShkaXlzcC55U2NhbGUpXG4gIC5vcmllbnQoXCJsZWZ0XCIpO1xuXG4vLyBzZXR1cCBjb2xvciBzY2FsZVxuZGl5c3AuY29sb3JTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gIC5yYW5nZShbXCJoc2woMjAsOTAlLDQwJSlcIiwgXCJoc2woMTgwLDYwJSw0MCUpXCJdKTtcblxuLy8gYWRkIGdyYXBoIGNhbnZhcyB0byAjc2NhdHRlcnBsb3QgZGl2XG5kaXlzcC5zdmcgPSBkMy5zZWxlY3QoXCIjZGl5c2NhdHRlcnBsb3RcIikuYXBwZW5kKFwic3ZnXCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBkaXlzcC53aWR0aCArIGRpeXNwLm1hcmdpbi5sZWZ0ICsgZGl5c3AubWFyZ2luLnJpZ2h0KVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGRpeXNwLmhlaWdodCArIGRpeXNwLm1hcmdpbi5ib3R0b20gKyBkaXlzcC5tYXJnaW4udG9wKVxuICAuYXBwZW5kKFwiZ1wiKVxuICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHtkaXlzcC5tYXJnaW4ubGVmdH0sJHtkaXlzcC5tYXJnaW4udG9wfSlgKTtcblxuLy8geC1heGlzXG5kaXlzcC5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgIC5hdHRyKHtcbiAgICAgIGNsYXNzIDogXCJ4IGF4aXNcIixcbiAgICAgIHRyYW5zZm9ybSA6IGB0cmFuc2xhdGUoMCwke2RpeXNwLmhlaWdodH0pYFxuICAgIH0pXG4gICAgLmNhbGwoZGl5c3AueEF4aXMpXG4gIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgLmF0dHIoe1xuICAgICAgY2xhc3MgOiBcImxhYmVsXCIsXG4gICAgICB4ICAgICA6IGRpeXNwLndpZHRoLFxuICAgICAgeSAgICAgOiAtNlxuICAgIH0pXG4gICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIilcbiAgICAudGV4dChcInhcIik7XG5cbi8vIHktYXhpc1xuZGl5c3Auc3ZnLmFwcGVuZChcImdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgLmNhbGwoZGl5c3AueUF4aXMpXG4gIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgLmF0dHIoe1xuICAgICAgY2xhc3MgOiBcImxhYmVsXCIsXG4gICAgICB0cmFuc2Zvcm0gOiBcInJvdGF0ZSgtOTApXCIsXG4gICAgICB5ICAgICA6IDYsXG4gICAgICBkeSAgICA6IFwiLjcxZW1cIlxuICAgIH0pXG4gICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIilcbiAgICAudGV4dChcInlcIik7XG5cbi8vIENIQU5HRVMgVE8gU0NBVFRFUiBQTE9UXG5kaXlidWNrZXQudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgLy8gYnVmZmVyIGFkZGVkIHRvIGRhdGEgZG9tYWluIHRvIHByZXZlbnQgb3ZlcmxhcHBpbmcgYXhpc1xuLy8gIGRpeXNwLnhTY2FsZS5kb21haW4oW2QzLm1pbihkYXRhLGRpeXNwLnhWYWx1ZSktMSwgZDMubWF4KGRhdGEsZGl5c3AueFZhbHVlKSsxXSk7XG4vLyAgZGl5c3AueVNjYWxlLmRvbWFpbihbZDMubWluKGRhdGEsZGl5c3AueVZhbHVlKS0xLCBkMy5tYXgoZGF0YSxkaXlzcC55VmFsdWUpKzFdKTtcbiAgZGl5c3AueFNjYWxlLmRvbWFpbihbMCwxMDBdKTtcbiAgZGl5c3AueVNjYWxlLmRvbWFpbihbMCwxMDBdKTtcbiAgZGl5c3AuY29sb3JTY2FsZS5kb21haW4oW2QzLm1pbihkaXlidWNrZXQuZGF0YSxkaXlzcC55VmFsdWUpLTEsZDMubWF4KGRpeWJ1Y2tldC5kYXRhLGRpeXNwLnlWYWx1ZSkrMV0pLm5pY2UoKTtcblxuICAvLyB1cGRhdGUgYXhlc1xuICBkaXlzcC5zdmcuc2VsZWN0KFwiLnguYXhpc1wiKVxuICAgIC50cmFuc2l0aW9uKClcbiAgICAuZHVyYXRpb24oMTAwMClcbiAgICAuY2FsbChkaXlzcC54QXhpcyk7XG5cbiAgZGl5c3Auc3ZnLnNlbGVjdChcIi55LmF4aXNcIilcbiAgICAudHJhbnNpdGlvbigpXG4gICAgLmR1cmF0aW9uKDEwMDApXG4gICAgLmNhbGwoZGl5c3AueUF4aXMpO1xuXG4gIC8vIGRvdHNcbiAgdmFyIGRvdHMgPSBkaXlzcC5zdmcuc2VsZWN0QWxsKFwiLmRvdFwiKVxuICAgIC5kYXRhKGRpeWJ1Y2tldC5kYXRhKVxuICAgIC5hdHRyKHtcbiAgICAgIGNsYXNzIDogXCJkb3RcIixcbiAgICAgIHIgICAgIDogMy41LFxuICAgICAgY3ggICAgOiBkaXlzcC54TWFwLFxuICAgICAgY3kgICAgOiBkaXlzcC55TWFwXG4gICAgfSlcbiAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGRpeXNwLmNvbG9yU2NhbGUoZGl5c3AueVZhbHVlKGQpKTsgfSlcblxuICBkb3RzLmVudGVyKClcbiAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgLmF0dHIoe1xuICAgICAgY2xhc3MgOiBcImRvdFwiLFxuICAgICAgciAgICAgOiAzLjUsXG4gICAgICBjeCAgICA6IGRpeXNwLnhNYXAsXG4gICAgICBjeSAgICA6IGRpeXNwLnlNYXBcbiAgICB9KVxuICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZGl5c3AuY29sb3JTY2FsZShkaXlzcC55VmFsdWUoZCkpOyB9KVxuICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGQsaSkge1xuICAgICAgaWYgKGRpeWJ1Y2tldC5kYXRhLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgZGl5YnVja2V0LmRhdGEuc3BsaWNlKGksMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydCgnaGV5IG1hbiwgbm90IGNvb2wuIFxcblxcbmV2ZXJ5b25lIGtub3dzIHRoZXJlIGhhdmUgdG8gZXhpc3QgYXQgbGVhc3QgdHdvIHBvaW50cyBmb3IgYSBsaW5lIHRvIGV4aXN0LicpXG4gICAgICB9XG4gICAgICBkaXlidWNrZXQudXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgZG90cy5leGl0KCkucmVtb3ZlKCk7XG5cbiAgLy8gY2FsY3VsYXRlIHRoZXRhIHZhbHVlcyB1c2luZyBncmFkaWVudCBkZXNjZW50XG4gIC8vIGJlZ2lucyB3aXRoIGEgXCJndWVzc1wiLCB3aGljaCBpcyB0aGV0YV8wID0gMCwgdGhldGFfMSA9IDBcbiAgLy8gYS5rLmEuIC0gdGhlIHgtYXhpcyAoeSA9IDAgKiB4ICsgMCA9PiB5ID0gMClcblxuICBkaXlsci5hbHBoYSA9IGRpeWxyLmFscGhhIHx8IDAuMDAwMyxcbiAgZGl5bHIudGhldGEgPSBkaXlsci50aGV0YSB8fCBbMCwwXSxcbiAgZGl5bHIuakhpc3RvcnkgPSBbXSxcbiAgZGl5bHIudGhldGFIaXN0b3J5ID0gW107XG4gIHZhciBpID0gMCxcbiAgICAgIGRpZmZlcmVuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRpeWxyLmpIaXN0b3J5W2ktMl0gP1xuICAgICAgICAgIGRpeWxyLmpIaXN0b3J5W2ktMl0gLSBkaXlsci5qSGlzdG9yeVtpLTFdIDpcbiAgICAgICAgICAxO1xuICAgICAgfTtcblxuICBkbyB7XG4gICAgZGl5bHIudGhldGEgPSBncmFkaWVudERlc2NlbnQoZGl5YnVja2V0LmRhdGEsZGl5bHIuYWxwaGEsZGl5bHIudGhldGEpO1xuICAgIGRpeWxyLmpIaXN0b3J5LnB1c2goSihkaXlidWNrZXQuZGF0YSxkaXlsci50aGV0YSkpO1xuICAgIGRpeWxyLnRoZXRhSGlzdG9yeS5wdXNoKGRpeWxyLnRoZXRhKTtcbiAgICBpKys7XG4gIH0gd2hpbGUgKGRpZmZlcmVuY2UoKSA+IDAuMDAwMSk7XG5cbiAgZGl5bHIuaXRlcmF0aW9ucyA9IGk7XG5cbiAgdmFyIG1heFggPSBkMy5tYXgoZGl5YnVja2V0LmRhdGEsZGl5c3AueFZhbHVlKTtcbiAgLy8gdmFyIG1pblggPSBkMy5taW4oZGl5YnVja2V0LmRhdGEsZGl5c3AueFZhbHVlKTtcbiAgdmFyIG1pblggPSAwO1xuICBkaXlzcC5zdmcuc2VsZWN0QWxsKFwibGluZVwiKS5yZW1vdmUoKTtcbiAgdmFyIGxpbmVPZkJlc3RGaXQgPSBkaXlzcC5zdmcuYXBwZW5kKFwibGluZVwiKVxuICAgIC5hdHRyKHtcbiAgICAgIHgxIDogZGl5c3AueFNjYWxlKG1pblgpLFxuICAgICAgeTEgOiBkaXlzcC55U2NhbGUobWluWCpkaXlsci50aGV0YVsxXSArIGRpeWxyLnRoZXRhWzBdKSxcbiAgICAgIHgyIDogZGl5c3AueFNjYWxlKG1heFgpLFxuICAgICAgeTIgOiBkaXlzcC55U2NhbGUobWF4WCpkaXlsci50aGV0YVsxXSArIGRpeWxyLnRoZXRhWzBdKSxcbiAgICAgIFwic3Ryb2tlXCIgOiBcIiMxQ0RFQzRcIixcbiAgICAgIFwic3Ryb2tlLXdpZHRoXCIgOiAyXG4gICAgfSk7XG5cbiAgLy8gZGlzcGxheSB0aGUgZXF1YXRpb24gZm9yIHRoZSBsaW5lIG9mIGJlc3QgZml0XG4gIHZhciBkb2NGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgZXEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdQJyk7XG4gIGRvY0ZyYWcuYXBwZW5kQ2hpbGQoZXEpO1xuICB2YXIgZXFUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYHkgPSAke2RpeWxyLnRoZXRhWzFdLnRvUHJlY2lzaW9uKDMpfXggKyAke2RpeWxyLnRoZXRhWzBdLnRvUHJlY2lzaW9uKDMpfWApO1xuICBlcS5hcHBlbmRDaGlsZChlcVRleHQpO1xuICAkKFwiI2RpeWVxdWF0aW9uXCIpLmVtcHR5KCk7XG4gICQoXCIjZGl5ZXF1YXRpb25cIikuYXBwZW5kKGRvY0ZyYWcpO1xuXG4gIHZhciBkb2NGcmFnMiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIG51bUl0ZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnUCcpO1xuICBkb2NGcmFnMi5hcHBlbmRDaGlsZChudW1JdGVycyk7XG4gIHZhciBudW1JdGVyc1RleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShgbnVtYmVyIG9mIGl0ZXJhdGlvbnM6ICR7ZGl5bHIuaXRlcmF0aW9uc31gKTtcbiAgbnVtSXRlcnMuYXBwZW5kQ2hpbGQobnVtSXRlcnNUZXh0KTtcbiAgJChcIiNudW0taXRlcnNcIikuZW1wdHkoKTtcbiAgJChcIiNudW0taXRlcnNcIikuYXBwZW5kKGRvY0ZyYWcyKTtcbn07XG5kaXlidWNrZXQudXBkYXRlKCk7XG5cbi8vIGFkZHMgYSBuZXcsIHJhbmRvbWx5IGdlbmVyYXRlZCBkYXR1bSB0byBncmFwaFxuZDMuc2VsZWN0KFwiI2RpeWFkZFwiKVxuICAub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3RG90ID0ge307XG4gICAgbmV3RG90LnggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgIG5ld0RvdC55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcbiAgICBkaXlidWNrZXQuZGF0YS5wdXNoKG5ld0RvdCk7XG4gICAgZGl5YnVja2V0LnVwZGF0ZSgpO1xuICB9KTtcblxuJCgnI2RpeXZhbHMnKS5vbignc3VibWl0JywgZnVuY3Rpb24oKSB7XG4gIGRpeWxyLnRoZXRhWzBdID0gJCgnI2RpeXZhbHMgaW5wdXQ6bnRoLWNoaWxkKDEpJykudmFsKCk7XG4gIGRpeWxyLnRoZXRhWzFdID0gJCgnI2RpeXZhbHMgaW5wdXQ6bnRoLWNoaWxkKDIpJykudmFsKCk7XG4gIGRpeWxyLmFscGhhID0gJCgnI2RpeXZhbHMgaW5wdXQ6bnRoLWNoaWxkKDMpJykudmFsKCk7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGRpeWJ1Y2tldC51cGRhdGUoKTtcbn0pO1xuIl19
